(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[3],{299:function(t,e,s){t.exports={profileInfo:"ProfileInfo_profileInfo__2IJgv",photoWrapper:"ProfileInfo_photoWrapper__2Sf8d",label:"ProfileInfo_label__v3rdV",icon:"ProfileInfo_icon__31_Fp",inputFile:"ProfileInfo_inputFile__1x-DX"}},300:function(t,e,s){t.exports={statusWrapper:"ProfileStatus_statusWrapper__2EA8v",editStatusWrapper:"ProfileStatus_editStatusWrapper__2OqDz",status:"ProfileStatus_status__3vAMm",editStatus:"ProfileStatus_editStatus__36KXI"}},301:function(t,e,s){t.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},302:function(t,e,s){t.exports={post:"Post_post__A0EJd",avatar:"Post_avatar__1wBwP",message:"Post_message__3raFK",text:"Post_text__3_Vii",like:"Post_like__oViQh",heart:"Post_heart__1jJO2"}},303:function(t,e,s){t.exports={form:"AddPostForm_form__33A21"}},305:function(t,e,s){"use strict";s.r(e),s.d(e,"ProfileContainer",(function(){return X}));var a=s(3),o=s(94),r=s(40),i=s(41),n=s(43),c=s(42),u=s(0),p=s(10),l=s(18),d=s(12),h=s(299),f=s.n(h),j=s(101),b=s(53),m=s(300),v=s.n(m),O=s(1),_=function(t){Object(n.a)(s,t);var e=Object(c.a)(s);function s(){var t;Object(r.a)(this,s);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={status:t.props.status,editMode:!1},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.statusChangeHandler=function(e){t.setState({status:e.currentTarget.value})},t}return Object(i.a)(s,[{key:"componentDidUpdate",value:function(t){this.updateStatusIfNeeded(t.status)}},{key:"updateStatusIfNeeded",value:function(t){t!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){var t="What's on your mind?";return Object(O.jsx)(O.Fragment,{children:this.state.editMode?Object(O.jsx)("div",{className:"".concat(v.a.editStatusWrapper),children:Object(O.jsx)("input",{className:"".concat(v.a.editStatus),value:this.state.status,onBlur:this.deactivateEditMode,onChange:this.statusChangeHandler,placeholder:t,autoFocus:!0})}):Object(O.jsx)("div",{className:v.a.statusWrapper,children:Object(O.jsx)("span",{className:v.a.status,onClick:this.activateEditMode,role:"presentation",children:this.props.status||t})})})}}]),s}(u.Component),x=function(t){var e=t.isOwner,s=t.profile,a=t.status,o=t.updateStatus,r=t.savePhoto;if(!s)return Object(O.jsx)(b.a,{text:"Loading..."});return Object(O.jsxs)("div",{className:f.a.profileInfo,children:[Object(O.jsxs)("div",{className:f.a.photoWrapper,children:[Object(O.jsx)("img",{className:f.a.photo,src:s.photos.large||j.a,alt:"".concat(s.fullName)}),e&&Object(O.jsxs)("label",{className:f.a.label,title:"Add photo",children:[Object(O.jsx)("input",{className:f.a.inputFile,type:"file",onChange:function(t){t.target.files&&r(t.target.files[0])}}),Object(O.jsx)("svg",{className:f.a.icon,viewBox:"0 0 32 32",width:"32",version:"1.1",height:"32",xmlns:"http://www.w3.org/2000/svg",children:Object(O.jsx)("path",{d:"M9.5 19c0 3.59 2.91 6.5 6.5 6.5s6.5-2.91 6.5-6.5-2.91-6.5-6.5-6.5-6.5 2.91-6.5 6.5zM30 8h-7c-0.5-2-1-4-3-4h-8c-2 0-2.5 2-3 4h-7c-1.1 0-2 0.9-2 2v18c0 1.1 0.9 2 2 2h28c1.1 0 2-0.9 2-2v-18c0-1.1-0.9-2-2-2zM16 27.875c-4.902 0-8.875-3.973-8.875-8.875s3.973-8.875 8.875-8.875c4.902 0 8.875 3.973 8.875 8.875s-3.973 8.875-8.875 8.875zM30 14h-4v-2h4v2z"})})]})]}),Object(O.jsx)(_,{status:a,updateStatus:o})]})},P=s(102),g=s(31),S=s(301),N=s.n(S),y=s(302),k=s.n(y),w=function(t){var e=t.message,s=t.likesCount;return Object(O.jsxs)("div",{className:k.a.post,children:[Object(O.jsx)("img",{className:k.a.avatar,src:j.a,width:"50",height:"50",alt:"Avatar"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:k.a.message,children:Object(O.jsx)("span",{className:k.a.text,children:e})}),Object(O.jsxs)("div",{className:k.a.like,children:[Object(O.jsx)("button",{type:"button",className:k.a.heart,children:"\u2661"}),Object(O.jsxs)("span",{children:["\xa0",s]}),Object(O.jsxs)("span",{children:["\xa0",1===s?"like":"likes"]})]})]})]})},I=s(133),M=s(134),C=s(303),A=s.n(C),W=s(27),F=s.n(W),z=s(71),E=s(91),B=Object(z.a)(100),D=Object(M.a)({form:"profileAddPostForm"})((function(t){var e=t.handleSubmit;return Object(O.jsxs)("form",{className:A.a.form,onSubmit:e,children:[Object(O.jsx)(I.a,{component:E.b,name:"post",placeholder:"Enter your message...",validate:[z.b,B]}),Object(O.jsx)("button",{type:"submit",className:F.a.btn,children:"Add post"})]})})),J=Object(u.memo)((function(t){var e=t.posts,s=t.addPost,a=Object(g.a)(e).reverse().map((function(t){return Object(O.jsx)(w,{id:t.id,message:t.message,likesCount:t.likesCount},t.id)}));return Object(O.jsxs)("div",{className:N.a.postsBlock,children:[Object(O.jsx)("h3",{children:"My posts"}),Object(O.jsx)(D,{onSubmit:function(t){s(t.post)}}),Object(O.jsx)("div",{className:N.a.posts,children:a})]})}));J.displayName="MyPosts";var U=P.a.addPost,K=Object(l.b)((function(t){return{posts:t.profilePage.posts}}),{addPost:U})(J),V=function(t){var e=t.isOwner,s=t.profile,a=t.status,o=t.updateStatus,r=t.savePhoto;return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{isOwner:e,profile:s,status:a,updateStatus:o,savePhoto:r}),Object(O.jsx)(K,{})]})},H=function(t){Object(n.a)(s,t);var e=Object(c.a)(s);function s(){return Object(r.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var t=Number(this.props.match.params.userId)||this.props.authorizedUserId;t?(this.props.getProfile(t),this.props.getStatus(t)):this.props.history.push("/login")}},{key:"render",value:function(){var t=this.props,e=t.profile,s=t.status,r=t.updateStatus,i=t.savePhoto,n=Object(o.a)(t,["profile","status","updateStatus","savePhoto"]);return Object(O.jsx)(V,Object(a.a)(Object(a.a)({},n),{},{isOwner:!this.props.match.params.userId,profile:e,status:s,updateStatus:r,savePhoto:i}))}}]),s}(u.Component),X=Object(p.d)(Object(l.b)((function(t){var e=t.profilePage;return{profile:e.profile,status:e.status,authorizedUserId:t.auth.id}}),{getProfile:P.b,getStatus:P.c,updateStatus:P.f,savePhoto:P.e}),d.g)(H)}}]);
//# sourceMappingURL=3.849eb0a9.chunk.js.map