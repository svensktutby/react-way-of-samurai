(this["webpackJsonpreact-way-of-samurai"]=this["webpackJsonpreact-way-of-samurai"]||[]).push([[3],{299:function(t,e,s){t.exports={profileInfo:"ProfileInfo_profileInfo__2IJgv",avatar:"ProfileInfo_avatar__3xuFq"}},300:function(t,e,s){t.exports={statusWrapper:"ProfileStatus_statusWrapper__2EA8v",editStatusWrapper:"ProfileStatus_editStatusWrapper__2OqDz",status:"ProfileStatus_status__3vAMm",editStatus:"ProfileStatus_editStatus__36KXI"}},301:function(t,e,s){t.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},302:function(t,e,s){t.exports={post:"Post_post__A0EJd",avatar:"Post_avatar__1wBwP",message:"Post_message__3raFK",text:"Post_text__3_Vii",like:"Post_like__oViQh",heart:"Post_heart__1jJO2"}},303:function(t,e,s){t.exports={form:"AddPostForm_form__33A21"}},305:function(t,e,s){"use strict";s.r(e),s.d(e,"ProfileContainer",(function(){return V}));var a=s(5),r=s(94),o=s(40),i=s(41),n=s(43),c=s(42),u=s(0),p=s(10),d=s(18),l=s(11),j=s(299),f=s.n(j),h=s(101),b=s(51),m=s(300),v=s.n(m),O=s(1),_=function(t){Object(n.a)(s,t);var e=Object(c.a)(s);function s(){var t;Object(o.a)(this,s);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={status:t.props.status,editMode:!1},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.status)},t.statusChangeHandler=function(e){t.setState({status:e.currentTarget.value})},t}return Object(i.a)(s,[{key:"componentDidUpdate",value:function(t){this.updateStatusIfNeeded(t.status)}},{key:"updateStatusIfNeeded",value:function(t){t!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){var t="What's on your mind?";return Object(O.jsx)(O.Fragment,{children:this.state.editMode?Object(O.jsx)("div",{className:"".concat(v.a.editStatusWrapper),children:Object(O.jsx)("input",{className:"".concat(v.a.editStatus),value:this.state.status,onBlur:this.deactivateEditMode,onChange:this.statusChangeHandler,placeholder:t,autoFocus:!0})}):Object(O.jsx)("div",{className:v.a.statusWrapper,children:Object(O.jsx)("span",{className:v.a.status,onClick:this.activateEditMode,role:"presentation",children:this.props.status||t})})})}}]),s}(u.Component),x=function(t){var e=t.profile,s=t.status,a=t.updateStatus;return e?Object(O.jsxs)("div",{className:f.a.profileInfo,children:[Object(O.jsx)("img",{className:f.a.avatar,src:e.photos.large||h.a,alt:"".concat(e.fullName," avatar")}),Object(O.jsx)(_,{status:s,updateStatus:a})]}):Object(O.jsx)(b.a,{text:"Loading..."})},S=s(102),P=s(31),g=s(301),y=s.n(g),N=s(302),k=s.n(N),M=function(t){var e=t.message,s=t.likesCount;return Object(O.jsxs)("div",{className:k.a.post,children:[Object(O.jsx)("img",{className:k.a.avatar,src:h.a,width:"50",height:"50",alt:"Avatar"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:k.a.message,children:Object(O.jsx)("span",{className:k.a.text,children:e})}),Object(O.jsxs)("div",{className:k.a.like,children:[Object(O.jsx)("button",{type:"button",className:k.a.heart,children:"\u2661"}),Object(O.jsxs)("span",{children:["\xa0",s]}),Object(O.jsxs)("span",{children:["\xa0",1===s?"like":"likes"]})]})]})]})},I=s(133),C=s(134),A=s(303),w=s.n(A),E=s(27),W=s.n(E),F=s(71),B=s(91),J=Object(F.a)(100),z=Object(C.a)({form:"profileAddPostForm"})((function(t){var e=t.handleSubmit;return Object(O.jsxs)("form",{className:w.a.form,onSubmit:e,children:[Object(O.jsx)(I.a,{component:B.b,name:"post",placeholder:"Enter your message...",validate:[F.b,J]}),Object(O.jsx)("button",{type:"submit",className:W.a.btn,children:"Add post"})]})})),D=Object(u.memo)((function(t){var e=t.posts,s=t.addPost,a=Object(P.a)(e).reverse().map((function(t){return Object(O.jsx)(M,{id:t.id,message:t.message,likesCount:t.likesCount},t.id)}));return Object(O.jsxs)("div",{className:y.a.postsBlock,children:[Object(O.jsx)("h3",{children:"My posts"}),Object(O.jsx)(z,{onSubmit:function(t){s(t.post)}}),Object(O.jsx)("div",{className:y.a.posts,children:a})]})}));D.displayName="MyPosts";var K=S.a.addPost,U=Object(d.b)((function(t){return{posts:t.profilePage.posts}}),{addPost:K})(D),q=function(t){var e=t.profile,s=t.status,a=t.updateStatus;return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{profile:e,status:s,updateStatus:a}),Object(O.jsx)(U,{})]})},H=function(t){Object(n.a)(s,t);var e=Object(c.a)(s);function s(){return Object(o.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"refreshProfile",value:function(){var t=Number(this.props.match.params.userId)||this.props.authorizedUserId;t?(this.props.getProfile(t),this.props.getStatus(t)):this.props.history.push("/login")}},{key:"render",value:function(){var t=this.props,e=t.profile,s=t.status,o=t.updateStatus,i=Object(r.a)(t,["profile","status","updateStatus"]);return Object(O.jsx)(q,Object(a.a)(Object(a.a)({},i),{},{profile:e,status:s,updateStatus:o}))}}]),s}(u.Component),V=Object(p.d)(Object(d.b)((function(t){var e=t.profilePage;return{profile:e.profile,status:e.status,authorizedUserId:t.auth.id}}),{getProfile:S.b,getStatus:S.c,updateStatus:S.e}),l.g)(H)}}]);
//# sourceMappingURL=3.ad8ecee3.chunk.js.map